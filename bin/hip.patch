diff --git a/include/hip/hcc_detail/hip_runtime.h b/include/hip/hcc_detail/hip_runtime.h
index c4ef1d82..bab217f6 100644
--- a/include/hip/hcc_detail/hip_runtime.h
+++ b/include/hip/hcc_detail/hip_runtime.h
@@ -66,7 +66,6 @@ THE SOFTWARE.
 // Remainder of this file only compiles with HCC
 #if defined __HCC__
 #include "grid_launch.h"
-#include "hc_printf.hpp"
 // TODO-HCC-GL - change this to typedef.
 // typedef grid_launch_parm hipLaunchParm ;
 
@@ -257,7 +256,7 @@ template <typename... All>
 static inline __device__ void printf(const char* format, All... all) {
     hc::printf(format, all...);
 }
-#elif defined(__HCC_ACCELERATOR__) || __HIP__
+#elif defined(__HCC_ACCELERATOR__)
 template <typename... All>
 static inline __device__ void printf(const char* format, All... all) {}
 #endif
@@ -452,6 +451,7 @@ hc_get_workitem_absolute_id(int dim)
 #endif
 
 // Support std::complex.
+#ifndef _OPENMP
 #pragma push_macro("__CUDA__")
 #define __CUDA__
 #include <__clang_cuda_math_forward_declares.h>
@@ -461,6 +461,7 @@ hc_get_workitem_absolute_id(int dim)
 #include <cuda_wrappers/new>
 #undef __CUDA__
 #pragma pop_macro("__CUDA__")
+#endif
 
 hipError_t hipExtModuleLaunchKernel(hipFunction_t f, uint32_t globalWorkSizeX,
                                     uint32_t globalWorkSizeY, uint32_t globalWorkSizeZ,
